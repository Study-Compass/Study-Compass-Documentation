"use strict";(self.webpackChunkdocumentation_site=self.webpackChunkdocumentation_site||[]).push([[6],{9891:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>r,default:()=>h,frontMatter:()=>s,metadata:()=>a,toc:()=>d});var o=t(4848),i=t(8453);const s={sidebar_position:5},r="AuthProvider Component & AuthContext",a={id:"Frontend/AuthProvider Component & AuthContext",title:"AuthProvider Component & AuthContext",description:"Created by: James Liu",source:"@site/docs/Frontend/AuthProvider Component & AuthContext.md",sourceDirName:"Frontend",slug:"/Frontend/AuthProvider Component & AuthContext",permalink:"/Study-Compass-Documentation/docs/Frontend/AuthProvider Component & AuthContext",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Frontend/AuthProvider Component & AuthContext.md",tags:[],version:"current",sidebarPosition:5,frontMatter:{sidebar_position:5},sidebar:"tutorialSidebar",previous:{title:"MobileCalendar Component",permalink:"/Study-Compass-Documentation/docs/Frontend/MobileCalendar Component"},next:{title:"CacheProvider Component & CacheContext",permalink:"/Study-Compass-Documentation/docs/Frontend/CacheProvider Component & CacheContext"}},c={},d=[{value:"<strong>Overview</strong>",id:"overview",level:2},{value:"<strong>Functionality</strong>",id:"functionality",level:2},{value:"<strong>Key Hooks</strong>",id:"key-hooks",level:2},{value:"<strong>Context</strong>",id:"context",level:2},{value:"<strong>Functions</strong>",id:"functions",level:2},{value:"<strong><code>validateToken</code></strong>",id:"validatetoken",level:3},{value:"<strong><code>login</code></strong>",id:"login",level:3},{value:"<strong><code>googleLogin</code></strong>",id:"googlelogin",level:3},{value:"<strong><code>logout</code></strong>",id:"logout",level:3},{value:"<strong>Usage</strong>",id:"usage",level:2},{value:"<strong>Props</strong>",id:"props",level:2},{value:"<strong>Error Handling</strong>",id:"error-handling",level:2},{value:"<strong>Dependencies</strong>",id:"dependencies",level:2},{value:"<strong>Encapsulation in AuthProvider and AuthContext</strong>",id:"encapsulation-in-authprovider-and-authcontext",level:2},{value:"<strong>Principle</strong>",id:"principle",level:3},{value:"<strong>Implementation</strong>",id:"implementation",level:3},{value:"<strong>Benefits</strong>",id:"benefits",level:3},{value:"<strong>Application</strong>",id:"application",level:3}];function l(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.h1,{id:"authprovider-component--authcontext",children:"AuthProvider Component & AuthContext"}),"\n",(0,o.jsx)(n.p,{children:"Created by: James Liu\nCreated time: March 27, 2024 12:49 PM\nTags: Authentication, Frontend"}),"\n",(0,o.jsx)(n.h2,{id:"overview",children:(0,o.jsx)(n.strong,{children:"Overview"})}),"\n",(0,o.jsxs)(n.p,{children:["The ",(0,o.jsx)(n.strong,{children:(0,o.jsx)(n.code,{children:"AuthProvider"})})," component encapsulates the authentication logic for a React application, including token validation, user login/logout, and state management of authentication and user information. It leverages Axios for HTTP requests and local storage for token persistence. The component provides a context (",(0,o.jsx)(n.strong,{children:(0,o.jsx)(n.code,{children:"AuthContext"})}),") which can be consumed by other components in the application to access authentication state and operations."]}),"\n",(0,o.jsx)(n.h2,{id:"functionality",children:(0,o.jsx)(n.strong,{children:"Functionality"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Token Validation:"})," Checks the validity of a stored authentication token with the backend upon initial load."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Login:"})," Supports traditional login with credentials and login via Google OAuth."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Logout:"})," Clears user session and token from local storage."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"State Management:"})," Manages and provides access to the current authentication state and user information."]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"key-hooks",children:(0,o.jsx)(n.strong,{children:"Key Hooks"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:(0,o.jsx)(n.code,{children:"useState"})}),": Manages states for ",(0,o.jsx)(n.strong,{children:(0,o.jsx)(n.code,{children:"isAuthenticated"})})," (authentication status) and ",(0,o.jsx)(n.strong,{children:(0,o.jsx)(n.code,{children:"user"})})," (user data)."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:(0,o.jsx)(n.code,{children:"useEffect"})}),": Handles token validation when the component mounts or updates."]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"context",children:(0,o.jsx)(n.strong,{children:"Context"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"AuthContext:"})," Exposes the authentication state and utility functions (",(0,o.jsx)(n.strong,{children:(0,o.jsx)(n.code,{children:"login"})}),", ",(0,o.jsx)(n.strong,{children:(0,o.jsx)(n.code,{children:"logout"})}),", ",(0,o.jsx)(n.strong,{children:(0,o.jsx)(n.code,{children:"googleLogin"})}),", ",(0,o.jsx)(n.strong,{children:(0,o.jsx)(n.code,{children:"validateToken"})}),") to child components."]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"functions",children:(0,o.jsx)(n.strong,{children:"Functions"})}),"\n",(0,o.jsx)(n.h3,{id:"validatetoken",children:(0,o.jsx)(n.strong,{children:(0,o.jsx)(n.code,{children:"validateToken"})})}),"\n",(0,o.jsx)(n.p,{children:"Asynchronously validates the current token with the backend. If valid, updates the application state to reflect the user's authenticated status and information."}),"\n",(0,o.jsx)(n.h3,{id:"login",children:(0,o.jsx)(n.strong,{children:(0,o.jsx)(n.code,{children:"login"})})}),"\n",(0,o.jsx)(n.p,{children:"Accepts user credentials, sends them to the backend for verification, and handles the response by setting the user's authenticated state and storing the token in local storage."}),"\n",(0,o.jsx)(n.h3,{id:"googlelogin",children:(0,o.jsx)(n.strong,{children:(0,o.jsx)(n.code,{children:"googleLogin"})})}),"\n",(0,o.jsx)(n.p,{children:"Sends a Google OAuth code to the backend for validation. On success, stores the returned token, marks the user as authenticated, and updates the user state."}),"\n",(0,o.jsx)(n.h3,{id:"logout",children:(0,o.jsx)(n.strong,{children:(0,o.jsx)(n.code,{children:"logout"})})}),"\n",(0,o.jsx)(n.p,{children:"Clears the user's token from local storage, resets the authentication and user states, and triggers a logout notification."}),"\n",(0,o.jsx)(n.h2,{id:"usage",children:(0,o.jsx)(n.strong,{children:"Usage"})}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:(0,o.jsx)(n.code,{children:"AuthProvider"})})," wraps Cache Provider as well as all the main application (router), all its children have access to its utility."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-jsx",children:"<AuthProvider>\n  <App />\n</AuthProvider>\n"})}),"\n",(0,o.jsxs)(n.p,{children:["Child components can access the authentication state and functions using the ",(0,o.jsx)(n.strong,{children:(0,o.jsx)(n.code,{children:"useContext(AuthContext)"})})," hook:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-jsx",children:"const { isAuthenticated, user, login, logout } = useContext(AuthContext);\n"})}),"\n",(0,o.jsx)(n.h2,{id:"props",children:(0,o.jsx)(n.strong,{children:"Props"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"children"}),": The child components that ",(0,o.jsx)(n.strong,{children:(0,o.jsx)(n.code,{children:"AuthProvider"})})," will wrap. This is a built-in prop for components that serve as providers in a React context."]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"error-handling",children:(0,o.jsx)(n.strong,{children:"Error Handling"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["The ",(0,o.jsx)(n.strong,{children:(0,o.jsx)(n.code,{children:"login"})})," and ",(0,o.jsx)(n.strong,{children:(0,o.jsx)(n.code,{children:"googleLogin"})})," functions catch and rethrow errors from failed authentication attempts."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:(0,o.jsx)(n.code,{children:"validateToken"})})," handles errors by removing the potentially invalid token from local storage but does not throw errors to its caller."]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"dependencies",children:(0,o.jsx)(n.strong,{children:"Dependencies"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"axios"}),": Used for making HTTP requests to the backend."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"React"}),": Utilizes React hooks and context."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"useNotification"}),": A custom hook for managing application-wide notifications. This should be implemented within your application or replaced with a similar mechanism for feedback."]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"encapsulation-in-authprovider-and-authcontext",children:(0,o.jsx)(n.strong,{children:"Encapsulation in AuthProvider and AuthContext"})}),"\n",(0,o.jsx)(n.h3,{id:"principle",children:(0,o.jsx)(n.strong,{children:"Principle"})}),"\n",(0,o.jsxs)(n.p,{children:["Encapsulation in the ",(0,o.jsx)(n.strong,{children:(0,o.jsx)(n.code,{children:"AuthProvider"})})," component and ",(0,o.jsx)(n.strong,{children:(0,o.jsx)(n.code,{children:"AuthContext"})})," is achieved by managing all authentication and user state changes internally within the ",(0,o.jsx)(n.strong,{children:(0,o.jsx)(n.code,{children:"AuthProvider"})}),". Functions that can directly change authentication or user states are defined inside the ",(0,o.jsx)(n.strong,{children:(0,o.jsx)(n.code,{children:"AuthProvider"})})," and are not exported directly; instead, they are made accessible via the context. This approach prevents unauthorized components from directly modifying sensitive states, enforcing a controlled interface for authentication state management."]}),"\n",(0,o.jsx)(n.h3,{id:"implementation",children:(0,o.jsx)(n.strong,{children:"Implementation"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Internal State Management:"})," The ",(0,o.jsx)(n.strong,{children:(0,o.jsx)(n.code,{children:"isAuthenticated"})})," and ",(0,o.jsx)(n.strong,{children:(0,o.jsx)(n.code,{children:"user"})})," states are managed solely within the ",(0,o.jsx)(n.strong,{children:(0,o.jsx)(n.code,{children:"AuthProvider"})}),". State updates are only triggered through specific functions (",(0,o.jsx)(n.strong,{children:(0,o.jsx)(n.code,{children:"validateToken"})}),", ",(0,o.jsx)(n.strong,{children:(0,o.jsx)(n.code,{children:"login"})}),", ",(0,o.jsx)(n.strong,{children:(0,o.jsx)(n.code,{children:"logout"})}),", ",(0,o.jsx)(n.strong,{children:(0,o.jsx)(n.code,{children:"googleLogin"})}),") designed for this purpose."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Controlled Access:"})," Components within the application access and manipulate the authentication state indirectly by using context-provided functions. This setup ensures that any changes to the authentication state are made through predefined, controlled operations that can include additional logic, validation, or side effects (such as notification handling)."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Private Functions:"})," Functions that change state (",(0,o.jsx)(n.strong,{children:(0,o.jsx)(n.code,{children:"validateToken"})}),", ",(0,o.jsx)(n.strong,{children:(0,o.jsx)(n.code,{children:"login"})}),", ",(0,o.jsx)(n.strong,{children:(0,o.jsx)(n.code,{children:"logout"})}),", ",(0,o.jsx)(n.strong,{children:(0,o.jsx)(n.code,{children:"googleLogin"})}),") are not exported from the module but are provided to children via the context. This prevents other parts of the application from bypassing the context system to change the authentication state directly, ensuring that all state changes follow the same flow and logic."]}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"benefits",children:(0,o.jsx)(n.strong,{children:"Benefits"})}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Security:"})," By limiting direct access to the authentication state and providing controlled means to modify it, the application reduces the risk of unauthorized or unintended state changes, increasing overall security."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Maintainability:"})," Encapsulation simplifies the maintenance of the component by localizing state management logic. Changes to authentication handling need to be made in one place, without searching through the codebase for direct state manipulations."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Consistency:"})," Enforcing a single path for state changes ensures that all related operations (such as token storage and notification handling) remain consistent and are executed reliably with every state change."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Debuggability:"})," When all changes to the authentication state go through a controlled interface, it's easier to trace and debug changes or issues related to authentication."]}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"application",children:(0,o.jsx)(n.strong,{children:"Application"})}),"\n",(0,o.jsx)(n.p,{children:"To apply encapsulation effectively, adhere to these guidelines:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Limit Context Exposure:"})," Only expose what is necessary. For instance, while the ",(0,o.jsx)(n.strong,{children:(0,o.jsx)(n.code,{children:"login"})}),", ",(0,o.jsx)(n.strong,{children:(0,o.jsx)(n.code,{children:"logout"})}),", and ",(0,o.jsx)(n.strong,{children:(0,o.jsx)(n.code,{children:"googleLogin"})})," functions are made available through the context, internal helper functions or state setters should not be."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Use Hooks for Access:"})," Encourage the use of custom hooks (e.g., a ",(0,o.jsx)(n.strong,{children:(0,o.jsx)(n.code,{children:"useAuth"})})," hook) that abstract away the context usage. This pattern can provide a more straightforward and controlled interface for interacting with the authentication state."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Document Usage:"})," Clearly document how and when to use the exposed context functions. This documentation helps ensure that developers understand the intended interface and don't attempt to circumvent encapsulation principles."]}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:["By adhering to encapsulation principles, the ",(0,o.jsx)(n.strong,{children:(0,o.jsx)(n.code,{children:"AuthProvider"})})," and ",(0,o.jsx)(n.strong,{children:(0,o.jsx)(n.code,{children:"AuthContext"})})," ensure that authentication state management remains secure, maintainable, and consistent across the application."]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(l,{...e})}):l(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>a});var o=t(6540);const i={},s=o.createContext(i);function r(e){const n=o.useContext(s);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),o.createElement(s.Provider,{value:n},e.children)}}}]);